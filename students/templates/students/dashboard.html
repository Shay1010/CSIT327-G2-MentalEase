{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MentalEase - Student Dashboard</title>

    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'students/css/dashboard.css' %}">

    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- JS -->
    <script src="{% static 'students/js/dashboard.js' %}" defer></script>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <a href="#" class="navbar-logo">MentalEase</a>
        <div class="profile-dropdown-container">
            <div id="profilePic" class="profile-pic">{{ student.first_name|first|upper }}{{ student.last_name|first|upper }}</div>
            <div id="profileDropdown" class="dropdown-menu">
                <div style="padding: 1rem; border-bottom: 1px solid #e5e7eb; text-align: center;">
                    <img src="{{ student.profile_image_url }}" class="profile-pic" style="width:50px; height:50px; margin-bottom:0.5rem;">
                    <p style="margin:0; font-weight:600;">{{ student.username }}</p>
                    <p style="margin:0; font-size:0.8rem; color:#717182;">{{ student.email }}</p>
                </div>
                <a href="{% url 'profile_page' %}" class="dropdown-item">My Profile</a>
                <div class="dropdown-item" id="openModalBtn">Change Email</div>
                <a href="{% url 'logout' %}" class="dropdown-item">Logout</a>
            </div>
        </div>
    </nav>

    <!-- Background Orbs -->
    <div class="gradient-background"></div>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>
    <div class="floating-circle circle-1"></div>
    <div class="floating-circle circle-2"></div>
    <div class="floating-circle circle-3"></div>

    <div class="page-container">
        <div class="form-container"> 
            <div class="form-card">
                <div class="shimmer-effect"></div>

                <header class="header">
                    <h1>Welcome, <span class="student-name">{{ student.username }}</span>!</h1>
                    <p class="subtitle">"Take care of your mind â€” you deserve peace."</p>
                </header>

                <div class="grid-container">
                    <!-- Mood Logging -->
                    <section class="card mood-card" id="moodCard">
                        <div class="card-header"><h2>Daily Mood Log</h2></div>
                        <div class="mood-entry-grid" id="moodEntryGrid">
                            <div class="mood-icon" data-mood="ecstatic">ğŸ¤©<span class="mood-label">Ecstatic</span></div>
                            <div class="mood-icon" data-mood="amazing">ğŸ¥³<span class="mood-label">Amazing</span></div>
                            <div class="mood-icon" data-mood="happy">ğŸ˜Š<span class="mood-label">Happy</span></div>
                            <div class="mood-icon" data-mood="calm">ğŸ˜Œ<span class="mood-label">Calm</span></div>
                            <div class="mood-icon" data-mood="neutral">ğŸ˜<span class="mood-label">Neutral</span></div>
                            <div class="mood-icon" data-mood="tired">ğŸ¥±<span class="mood-label">Tired</span></div>
                            <div class="mood-icon" data-mood="stressed">ğŸ˜¤<span class="mood-label">Stressed</span></div>
                            <div class="mood-icon" data-mood="anxious">ğŸ˜°<span class="mood-label">Anxious</span></div>
                            <div class="mood-icon" data-mood="sad">ğŸ˜”<span class="mood-label">Sad</span></div>
                            <div class="mood-icon" data-mood="awful">ğŸ˜­<span class="mood-label">Awful</span></div>
                        </div>
                        <button class="save-mood-btn" id="saveMoodBtn">Save Mood Entry</button>
                        <p id="moodMessage">Mood saved successfully!</p>
                    </section>

                    <!-- Mood History & Trends -->
                    <section class="card mood-card">
                        <div class="card-header"><h2>Mood History & Trends</h2></div>
                        <div id="moodBarChart" class="bar-chart"></div>
                        <canvas id="moodChart"></canvas>
                        <h3>Mood Log History</h3>
                        <ul class="mood-history" id="moodHistoryList"></ul>
                    </section>

                    <!-- Reflective Journal -->
                    <section class="card journal-card">
                        <div class="card-header"><h2>Reflective Journal</h2></div>
                        <textarea class="journal-textarea" placeholder="Write your thoughts..."></textarea>
                        <div>
                            <button class="journal-action-btn">Save New Entry</button>
                            <a href="#" class="resource-link">View All Entries</a>
                        </div>
                    </section>

                    <!-- Hotlines & Articles -->
                    <section class="card hotline-card">
                        <div class="card-header"><h2>Campus Hotlines</h2></div>
                        <ul class="resource-list">
                            <li>ğŸ“ CIT-U Wellness Center: <span class="hotline-number">123-4567</span></li>
                            <li>ğŸ“ Cebu Lifeline: <span class="hotline-number">988</span></li>
                            <li>ğŸ“ National Mental Health Crisis Line: <span class="hotline-number">1553</span></li>
                        </ul>
                    </section>

                    <section class="card article-card">
                        <div class="card-header"><h2>Wellness Guides & Articles</h2></div>
                        <ul class="resource-list">
                            <li><a href="https://www.who.int/health-topics/mental-health" target="_blank">WHO: Mental Health Resources</a></li>
                            <li><a href="https://www.psychologytoday.com/" target="_blank">Psychology Today</a></li>
                            <li><a href="https://www.mind.org.uk/" target="_blank">Mind UK: Mental Health Support</a></li>
                        </ul>
                    </section>
                </div>
            </div>
        </div>
    </div>

    <!-- Email Modal -->
    <div id="emailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Update Email Address</h3>
                <button class="close-button" id="closeModalBtn">&times;</button>
            </div>
            <form id="emailChangeForm">
                <input type="email" id="newEmailInput" placeholder="new.email@example.com" required class="form-input">
                <button type="submit" class="save-button" id="saveEmailBtn">Save New Email</button>
                <div id="saveMessage" class="save-message"></div>
            </form>
        </div>
    </div>
</body>
</html>
